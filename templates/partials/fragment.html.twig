{% macro explode_data_attribs(data) %}
    {% for k, v in data %}
        {% if v is not empty %}
            data-{{k}}="{{v}}" 
        {% endif %}
    {% endfor %}
{% endmacro %}

{% set module_image = page.header.module_image ? page.media[page.header.module_image] : page.media.images|first %}
{% set render_image = module_image and page.header.module_image_position is defined and page.header.module_image_position != 'none' %}
{% set img_position = render_image ? page.header.module_image_position : '' %}

{% if render_image and img_position == 'back' %}
    {% set classes = classes ~ 'back-img' %}
    {% set styles = styles ~ 'background-image: url(' ~ module_image.url ~ ');' %}
    {% if data_atts is defined %}
        {% set data_atts = data_atts|merge({'paroller-factor': 0.5}) %}
    {% else %}
        {% set data_atts = {'paroller-factor': 0.5} %}
    {% endif %}
{% endif %}

<section {% if id %}id="{{id}}"{% endif %} {% if classes %}class="{{classes}}"{% endif %} {% if styles %}style="{{styles}}"{% endif %} {{ _self.explode_data_attribs(data_atts) }}>
    {% block section %}
    <div class="container">
        {% block container %}{% endblock %}
    </div>
    {% endblock %}
</section>
